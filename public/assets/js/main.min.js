$(async function(){$(window).on("resize.vh",function(){var e=.01*window.innerHeight;$("html").css("--vh",e+"px")}).trigger("resize.vh");const n=document.querySelector("[data-camera-video]"),l=document.querySelector("[data-camera-canvas]"),w=l.getContext("2d");let i,u=!0,c;function e(){navigator.mediaDevices.getUserMedia({video:{facingMode:u?"user":"environment",width:{ideal:2400},height:{ideal:3200}}}).then(function(e){i=e,n.srcObject=e,c&&n.removeEventListener("loadeddata",c),c=function(){l.width=n.videoWidth,l.height=n.videoHeight},n.addEventListener("loadeddata",c,!1);const g=new Image;g.src="./assets/image/touch/logo.png";const t=new FaceMesh({locateFile:e=>`https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${e}`});t.setOptions({maxNumFaces:1,refineLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),t.onResults(function(m){requestAnimationFrame(()=>{if(w.clearRect(0,0,l.width,l.height),w.save(),u&&(w.translate(l.width,0),w.scale(-1,1)),w.drawImage(m.image,0,0,l.width,l.height),m.multiFaceLandmarks&&0<m.multiFaceLandmarks.length){var i=m.multiFaceLandmarks[0];let e=1/0,t=1/0,a=-1/0,n=-1/0;for(const h of i){var c=h.x*l.width,o=h.y*l.height;e=Math.min(e,c),t=Math.min(t,o),a=Math.max(a,c),n=Math.max(n,o)}var r=a-e,d=r*(n-t)/(window.innerWidth*window.innerHeight),s=i[10],i=s.x*l.width,s=s.y*l.height,d=r+10*d;w.drawImage(g,i-d/2,s-d,d,d)}w.restore()})});const a=new Camera(n,{onFrame:async()=>{await t.send({image:n})},width:3024,height:2400,facingMode:u?"user":"environment"});a.start()}).catch(function(e){alert("取得相機訪問權限失敗: ",e.message,e.name)})}e(),$("[data-camera-direction]").on("click",function(){i.getTracks().forEach(e=>e.stop()),u=!u,e()})});
//# sourceMappingURL=main.min.js.map
