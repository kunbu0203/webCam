$(async function(){$(window).on("resize.vh",function(){var e=.01*window.innerHeight;$("html").css("--vh",e+"px")}).trigger("resize.vh");const t=document.querySelector("[data-camera-video]"),a=document.querySelector("[data-camera-canvas]"),i=a.getContext("2d");let n,o=!0,e;function c(){navigator.mediaDevices.getUserMedia({video:{facingMode:o?"user":"environment",width:{ideal:2400},height:{ideal:3200}}}).then(function(e){n=e,t.srcObject=e}).catch(function(e){alert("取得相機訪問權限失敗: ",e.message,e.name)})}c();new Promise((e,n)=>{t.addEventListener("play",function(){a.width=t.videoWidth,a.height=t.videoHeight,e()},!1)});await 0,$("[data-camera-direction]").on("click",function(){n.getTracks().forEach(e=>e.stop()),o=!o,c()});const r=new Image;r.src="./assets/image/touch/logo.png";const s=new FaceMesh({locateFile:e=>`https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${e}`});function d(){e=new Camera(t,{onFrame:async()=>{await s.send({image:t})},width:t.videoWidth,height:t.videoHeight,facingMode:o?"user":"environment"}),e.start()}s.setOptions({maxNumFaces:1,refineLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),s.onResults(function(n){requestAnimationFrame(()=>{if(i.clearRect(0,0,a.width,a.height),i.save(),o&&(i.translate(a.width,0),i.scale(-1,1)),i.drawImage(n.image,0,0,a.width,a.height),n.multiFaceLandmarks)for(const e of n.multiFaceLandmarks)drawConnectors(i,e,FACEMESH_RIGHT_EYE,{color:"#FF3030"}),drawConnectors(i,e,FACEMESH_LEFT_EYE,{color:"#30FF30"}),drawConnectors(i,e,FACEMESH_FACE_OVAL,{color:"#E0E0E0"}),drawConnectors(i,e,FACEMESH_LIPS,{color:"#E0E0E0"});i.restore()})}),d()});
//# sourceMappingURL=main.min.js.map
