$(async function(){$(window).on("resize.vh",function(){var e=.01*window.innerHeight;$("html").css("--vh",e+"px")}).trigger("resize.vh");const a=document.querySelector("[data-camera-video]"),g=document.querySelector("[data-camera-canvas]"),w=g.getContext("2d");let t;navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:2400},height:{ideal:3200}}}).then(function(e){t=e,a.srcObject=e}).catch(function(e){alert("取得相機訪問權限失敗: ",e.message,e.name)});new Promise((e,t)=>{a.addEventListener("loadeddata",function(){g.width=a.videoWidth,g.height=a.videoHeight,e()},!1)});await 0;const l=new Image;l.src="./assets/image/touch/logo.png";const e=new FaceMesh({locateFile:e=>`https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${e}`});e.setOptions({maxNumFaces:1,refineLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),e.onResults(function(m){requestAnimationFrame(()=>{if(w.clearRect(0,0,g.width,g.height),w.save(),w.translate(g.width,0),w.scale(-1,1),w.drawImage(m.image,0,0,g.width,g.height),m.multiFaceLandmarks&&0<m.multiFaceLandmarks.length){var n=m.multiFaceLandmarks[0];let e=1/0,t=1/0,a=-1/0,i=-1/0;for(const h of n){var d=h.x*g.width,o=h.y*g.height;e=Math.min(e,d),t=Math.min(t,o),a=Math.max(a,d),i=Math.max(i,o)}var c=a-e,r=c*(i-t)/(window.innerWidth*window.innerHeight),s=n[10],n=s.x*g.width,s=s.y*g.height,r=c+10*r;w.drawImage(l,n-r/2,s-r,r,r)}w.restore()})});const i=new Camera(a,{onFrame:async()=>{await e.send({image:a})},width:a.videoWidth,height:a.videoHeight,facingMode:"user"});i.start()});